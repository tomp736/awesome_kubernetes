- name: Configure Worker
  hosts: master
  remote_user: sysadmin
  become: yes

  collections:
  - labrats_work.modules_ansible
  
  tasks:  
  - ansible.builtin.import_role:
      name: labrats_work.modules_ansible.fluxcd
    vars: 
      FLUX_INIT_OWNER: "{{ lookup('ansible.builtin.env','FLUX_INIT_OWNER') }}"
      FLUX_INIT_REPO: "{{ lookup('ansible.builtin.env','FLUX_INIT_REPO') }}"
      FLUX_INIT_PATH: "{{ lookup('ansible.builtin.env','FLUX_INIT_PATH') }}"
      FLUX_INIT_TOKEN: "{{ lookup('ansible.builtin.env','FLUX_INIT_TOKEN') }}"